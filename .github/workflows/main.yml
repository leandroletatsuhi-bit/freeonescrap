name: FreeOnes Full Scrape (100% Dados)

on:
  workflow_dispatch:  # Apenas manual, para evitar sobrecarga diária

permissions:
  contents: write  # Permite push automático

jobs:
  full-scrape:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.12'

      - name: Install dependencies
        run: |
          pip install requests beautifulsoup4 tqdm

      - name: Rodar coleta completa de URLs (1-babes.py - 416 páginas)
        run: |
          python 1-babes.py <<EOF
          416
          EOF

      - name: Rodar coleta completa de bios (2-urls.py - Todas as atrizes)
        run: |
          python 2-urls.py <<EOF
          1
          62705
          EOF

      # Opcional: Incluir 3-atrizes.py se ele for necessário para consolidação
      # - name: Rodar consolidação (3-atrizes.py)
      #   run: python 3-atrizes.py

      - name: Commit e push dos dados completos
        run: |
          git config --global user.name "Leandro Don"
          git config --global user.email "leandroletatsuhi@gmail.com"
          git add resultados/ atrizes/
          git commit -m "Coleta completa (100%) - $(date +'%Y-%m-%d %H:%M')" || echo "Nada para commitar"
          git push
